



<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="ApiMeter User Documentation">
      
      
      
        <meta name="author" content="debugtalk">
      
      
        <meta name="lang:clipboard.copy" content="å¤åˆ¶">
      
        <meta name="lang:clipboard.copied" content="å·²å¤åˆ¶">
      
        <meta name="lang:search.language" content="jp">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="æ²¡æœ‰æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„ç»“æœ">
      
        <meta name="lang:search.result.one" content="æ‰¾åˆ° 1 ä¸ªç¬¦åˆæ¡ä»¶çš„ç»“æœ">
      
        <meta name="lang:search.result.other" content="# ä¸ªç¬¦åˆæ¡ä»¶çš„ç»“æœ">
      
        <meta name="lang:search.tokenizer" content="[\uff0c\u3002]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-3.3.0">
    
    
      
        <title>å¿«é€Ÿä¸Šæ‰‹æŒ‡å— - ApiMeter Docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.572ca0f0.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.22915126.css">
      
      
        
        
        <meta name="theme-color" content="#3f51b5">
      
    
    
      <script src="../assets/javascripts/modernizr.962652e9.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-114587036-2"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-114587036-2")</script>
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#_1" tabindex="1" class="md-skip">
        è·³è½¬è‡³
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="ApiMeter Docs" class="md-header-nav__button md-logo">
          
            <i class="md-icon">î Œ</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                ApiMeter Docs
              </span>
              <span class="md-header-nav__topic">
                å¿«é€Ÿä¸Šæ‰‹æŒ‡å—
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="æœç´¢" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            é”®å…¥ä»¥å¼€å§‹æœç´¢
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://git.umlife.net/utils/apimeter" title="å‰å¾€ Github ä»“åº“" class="md-source" data-md-source="">
    
    <div class="md-source__repository">
      ApiMeter
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href=".." title="ApiMeter Docs" class="md-nav__button md-logo">
      
        <i class="md-icon">î Œ</i>
      
    </a>
    ApiMeter Docs
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://git.umlife.net/utils/apimeter" title="å‰å¾€ Github ä»“åº“" class="md-source" data-md-source="">
    
    <div class="md-source__repository">
      ApiMeter
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="ä»‹ç»" class="md-nav__link">
      ä»‹ç»
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../Installation/" title="å®‰è£…è¯´æ˜" class="md-nav__link">
      å®‰è£…è¯´æ˜
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      åŸºç¡€æ¦‚å¿µ
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        åŸºç¡€æ¦‚å¿µ
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../concept/nominal/" title="åè¯è§£é‡Š" class="md-nav__link">
      åè¯è§£é‡Š
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      æµ‹è¯•å‡†å¤‡
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        æµ‹è¯•å‡†å¤‡
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../prepare/record/" title="å½•åˆ¶ç”Ÿæˆç”¨ä¾‹" class="md-nav__link">
      å½•åˆ¶ç”Ÿæˆç”¨ä¾‹
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../prepare/project-structure/" title="é¡¹ç›®æ–‡ä»¶ç»„ç»‡" class="md-nav__link">
      é¡¹ç›®æ–‡ä»¶ç»„ç»‡
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../prepare/testcase-structure/" title="æµ‹è¯•ç”¨ä¾‹ç»„ç»‡" class="md-nav__link">
      æµ‹è¯•ç”¨ä¾‹ç»„ç»‡
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../prepare/request-hook/" title="hookæœºåˆ¶" class="md-nav__link">
      hookæœºåˆ¶
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../prepare/dot-env/" title="ç¯å¢ƒå˜é‡" class="md-nav__link">
      ç¯å¢ƒå˜é‡
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../prepare/testcase-layer/" title="æµ‹è¯•ç”¨ä¾‹åˆ†å±‚" class="md-nav__link">
      æµ‹è¯•ç”¨ä¾‹åˆ†å±‚
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../prepare/parameters/" title="å‚æ•°åŒ–æ•°æ®é©±åŠ¨" class="md-nav__link">
      å‚æ•°åŒ–æ•°æ®é©±åŠ¨
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../prepare/validate/" title="æ ¡éªŒå™¨ç”¨æ³•" class="md-nav__link">
      æ ¡éªŒå™¨ç”¨æ³•
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../prepare/script/" title="è‡ªå®šä¹‰è„šæœ¬æ ¡éªŒ" class="md-nav__link">
      è‡ªå®šä¹‰è„šæœ¬æ ¡éªŒ
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../prepare/pretty/" title="ç”¨ä¾‹æ ¼å¼åŒ–" class="md-nav__link">
      ç”¨ä¾‹æ ¼å¼åŒ–
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../prepare/yaml-issue/" title="å¸¸è§æ ¼å¼é—®é¢˜" class="md-nav__link">
      å¸¸è§æ ¼å¼é—®é¢˜
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../prepare/security/" title="ä¿¡æ¯å®‰å…¨" class="md-nav__link">
      ä¿¡æ¯å®‰å…¨
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../prepare/upload-case/" title="æ–‡ä»¶ä¸Šä¼ åœºæ™¯" class="md-nav__link">
      æ–‡ä»¶ä¸Šä¼ åœºæ™¯
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      æµ‹è¯•æ‰§è¡Œ
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        æµ‹è¯•æ‰§è¡Œ
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../run-tests/cli/" title="è¿è¡Œæµ‹è¯•(CLI)" class="md-nav__link">
      è¿è¡Œæµ‹è¯•(CLI)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../run-tests/report/" title="æµ‹è¯•æŠ¥å‘Š" class="md-nav__link">
      æµ‹è¯•æŠ¥å‘Š
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../run-tests/load-test/" title="æ€§èƒ½æµ‹è¯•" class="md-nav__link">
      æ€§èƒ½æµ‹è¯•
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      å¼€å‘æ‰©å±•
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        å¼€å‘æ‰©å±•
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../development/architecture/" title="ä»£ç æ¡†æ¶" class="md-nav__link">
      ä»£ç æ¡†æ¶
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../development/dev-api/" title="å¼€å‘æ‰©å±•" class="md-nav__link">
      å¼€å‘æ‰©å±•
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../FAQ/" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      å®è·µæ¡ˆä¾‹
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        å®è·µæ¡ˆä¾‹
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../examples/quickstart-case/" title="å¿«é€Ÿä¸Šæ‰‹æ¡ˆä¾‹" class="md-nav__link">
      å¿«é€Ÿä¸Šæ‰‹æ¡ˆä¾‹
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../examples/testerhome-login/" title="TesterHome ç™»å½•" class="md-nav__link">
      TesterHome ç™»å½•
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../examples/demo-klook/" title="klook" class="md-nav__link">
      klook
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../related-docs/" title="ç›¸å…³èµ„æ–™" class="md-nav__link">
      ç›¸å…³èµ„æ–™
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../CHANGELOG/" title="CHANGELOG" class="md-nav__link">
      CHANGELOG
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">ç›®å½•</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" title="ğŸ¯ å­¦ä¹ ç›®æ ‡" class="md-nav__link">
    ğŸ¯ å­¦ä¹ ç›®æ ‡
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#apimeter" title="ğŸ“¦ ç¬¬ä¸€æ­¥ï¼šå®‰è£… ApiMeter" class="md-nav__link">
    ğŸ“¦ ç¬¬ä¸€æ­¥ï¼šå®‰è£… ApiMeter
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" title="å®‰è£…å‘½ä»¤" class="md-nav__link">
    å®‰è£…å‘½ä»¤
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" title="éªŒè¯å®‰è£…" class="md-nav__link">
    éªŒè¯å®‰è£…
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" title="ğŸš€ ç¬¬äºŒæ­¥ï¼šå‡†å¤‡æµ‹è¯•ç¯å¢ƒ" class="md-nav__link">
    ğŸš€ ç¬¬äºŒæ­¥ï¼šå‡†å¤‡æµ‹è¯•ç¯å¢ƒ
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" title="å¯åŠ¨æµ‹è¯•æœåŠ¡å™¨" class="md-nav__link">
    å¯åŠ¨æµ‹è¯•æœåŠ¡å™¨
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" title="æµ‹è¯•æœåŠ¡å™¨æ¥å£è¯´æ˜" class="md-nav__link">
    æµ‹è¯•æœåŠ¡å™¨æ¥å£è¯´æ˜
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_8" title="ğŸ“ ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹" class="md-nav__link">
    ğŸ“ ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1" title="1. åˆ›å»ºé¡¹ç›®ç»“æ„" class="md-nav__link">
    1. åˆ›å»ºé¡¹ç›®ç»“æ„
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2" title="2. åˆ›å»ºè‡ªå®šä¹‰å‡½æ•°æ–‡ä»¶" class="md-nav__link">
    2. åˆ›å»ºè‡ªå®šä¹‰å‡½æ•°æ–‡ä»¶
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" title="3. åˆ›å»ºç¬¬ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹" class="md-nav__link">
    3. åˆ›å»ºç¬¬ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_9" title="ğŸ® ç¬¬å››æ­¥ï¼šè¿è¡Œæµ‹è¯•" class="md-nav__link">
    ğŸ® ç¬¬å››æ­¥ï¼šè¿è¡Œæµ‹è¯•
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_10" title="åŸºç¡€è¿è¡Œ" class="md-nav__link">
    åŸºç¡€è¿è¡Œ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#html" title="ç”Ÿæˆ HTML æŠ¥å‘Š" class="md-nav__link">
    ç”Ÿæˆ HTML æŠ¥å‘Š
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" title="é¢„æœŸè¾“å‡º" class="md-nav__link">
    é¢„æœŸè¾“å‡º
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#apimeter_1" title="ğŸ¯ ç¬¬äº”æ­¥ï¼šä½“éªŒ ApiMeter æ ¸å¿ƒç‰¹æ€§" class="md-nav__link">
    ğŸ¯ ç¬¬äº”æ­¥ï¼šä½“éªŒ ApiMeter æ ¸å¿ƒç‰¹æ€§
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1script" title="ç‰¹æ€§ 1ï¼šscript è‡ªå®šä¹‰è„šæœ¬æ ¡éªŒ" class="md-nav__link">
    ç‰¹æ€§ 1ï¼šscript è‡ªå®šä¹‰è„šæœ¬æ ¡éªŒ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_1" title="ç‰¹æ€§ 2ï¼šå…¨å±€å˜é‡æ— ç¼è®¿é—®" class="md-nav__link">
    ç‰¹æ€§ 2ï¼šå…¨å±€å˜é‡æ— ç¼è®¿é—®
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_1" title="ç‰¹æ€§ 3ï¼šè‡ªå®šä¹‰å‡½æ•°é«˜çº§å‚æ•°" class="md-nav__link">
    ç‰¹æ€§ 3ï¼šè‡ªå®šä¹‰å‡½æ•°é«˜çº§å‚æ•°
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4" title="ç‰¹æ€§ 4ï¼šå˜é‡è½¬ä¹‰" class="md-nav__link">
    ç‰¹æ€§ 4ï¼šå˜é‡è½¬ä¹‰
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_12" title="ğŸ“Š ç¬¬å…­æ­¥ï¼šæŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š" class="md-nav__link">
    ğŸ“Š ç¬¬å…­æ­¥ï¼šæŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1_1" title="1. æµ‹è¯•æ¦‚è§ˆ" class="md-nav__link">
    1. æµ‹è¯•æ¦‚è§ˆ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-apimeter" title="2. è¯¦ç»†ç»“æœï¼ˆğŸ†• ApiMeter å¢å¼ºç‰¹æ€§ï¼‰" class="md-nav__link">
    2. è¯¦ç»†ç»“æœï¼ˆğŸ†• ApiMeter å¢å¼ºç‰¹æ€§ï¼‰
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_13" title="ğŸ“ è¿›é˜¶å­¦ä¹ " class="md-nav__link">
    ğŸ“ è¿›é˜¶å­¦ä¹ 
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_14" title="å‚æ•°åŒ–æµ‹è¯•" class="md-nav__link">
    å‚æ•°åŒ–æµ‹è¯•
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" title="æµ‹è¯•ç”¨ä¾‹åˆ†å±‚" class="md-nav__link">
    æµ‹è¯•ç”¨ä¾‹åˆ†å±‚
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" title="ç¯å¢ƒå˜é‡ç®¡ç†" class="md-nav__link">
    ç¯å¢ƒå˜é‡ç®¡ç†
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_17" title="ğŸ”¥ å®æˆ˜ç»ƒä¹ " class="md-nav__link">
    ğŸ”¥ å®æˆ˜ç»ƒä¹ 
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1http" title="ç»ƒä¹  1ï¼šHTTP æ¥å£æµ‹è¯•" class="md-nav__link">
    ç»ƒä¹  1ï¼šHTTP æ¥å£æµ‹è¯•
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2_2" title="ç»ƒä¹  2ï¼šè®¤è¯æµç¨‹æµ‹è¯•" class="md-nav__link">
    ç»ƒä¹  2ï¼šè®¤è¯æµç¨‹æµ‹è¯•
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_18" title="ğŸ“š ä¸‹ä¸€æ­¥å­¦ä¹ " class="md-nav__link">
    ğŸ“š ä¸‹ä¸€æ­¥å­¦ä¹ 
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_19" title="æ·±å…¥å­¦ä¹ " class="md-nav__link">
    æ·±å…¥å­¦ä¹ 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_20" title="å®æˆ˜æ¡ˆä¾‹" class="md-nav__link">
    å®æˆ˜æ¡ˆä¾‹
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_21" title="è¿›é˜¶ä¸»é¢˜" class="md-nav__link">
    è¿›é˜¶ä¸»é¢˜
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_22" title="â“ å¸¸è§é—®é¢˜" class="md-nav__link">
    â“ å¸¸è§é—®é¢˜
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-script-validate" title="1. ä¸ºä»€ä¹ˆæ¨èä½¿ç”¨ script è€Œä¸æ˜¯ validateï¼Ÿ" class="md-nav__link">
    1. ä¸ºä»€ä¹ˆæ¨èä½¿ç”¨ script è€Œä¸æ˜¯ validateï¼Ÿ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-script" title="2. script ä¸­çš„å˜é‡éœ€è¦åŠ  $ å‰ç¼€å—ï¼Ÿ" class="md-nav__link">
    2. script ä¸­çš„å˜é‡éœ€è¦åŠ  $ å‰ç¼€å—ï¼Ÿ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3_2" title="3. å¦‚ä½•è°ƒè¯•å¤±è´¥çš„æµ‹è¯•ï¼Ÿ" class="md-nav__link">
    3. å¦‚ä½•è°ƒè¯•å¤±è´¥çš„æµ‹è¯•ï¼Ÿ
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4_1" title="4. å¦‚ä½•ç»„ç»‡å¤§å‹æµ‹è¯•é¡¹ç›®ï¼Ÿ" class="md-nav__link">
    4. å¦‚ä½•ç»„ç»‡å¤§å‹æµ‹è¯•é¡¹ç›®ï¼Ÿ
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_23" title="ğŸ‰ æ€»ç»“" class="md-nav__link">
    ğŸ‰ æ€»ç»“
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              

                
                
                <h1 id="_1">å¿«é€Ÿä¸Šæ‰‹æŒ‡å—<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h1>
<p>æ¬¢è¿ä½¿ç”¨ ApiMeterï¼è¿™ä»½æŒ‡å—å°†åœ¨ <strong>10 åˆ†é’Ÿå†…</strong>å¸®ä½ æŒæ¡ ApiMeter çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œè½»æ¾ä¸Šæ‰‹ API è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚</p>
<h2 id="_2">ğŸ¯ å­¦ä¹ ç›®æ ‡<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<p>é€šè¿‡æœ¬æŒ‡å—ï¼Œä½ å°†å­¦ä¼šï¼š
- âœ… å®‰è£…å’Œé…ç½® ApiMeter
- âœ… ç¼–å†™ç¬¬ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹
- âœ… ä½¿ç”¨ ApiMeter çš„æ ¸å¿ƒç‰¹æ€§ï¼ˆscript æ ¡éªŒã€å…¨å±€å˜é‡ã€è‡ªå®šä¹‰å‡½æ•°ï¼‰
- âœ… è¿è¡Œæµ‹è¯•å¹¶æŸ¥çœ‹æŠ¥å‘Š</p>
<h2 id="apimeter">ğŸ“¦ ç¬¬ä¸€æ­¥ï¼šå®‰è£… ApiMeter<a class="headerlink" href="#apimeter" title="Permanent link">&para;</a></h2>
<h3 id="_3">å®‰è£…å‘½ä»¤<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>apimeter
</code></pre></div>

<h3 id="_4">éªŒè¯å®‰è£…<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># æŸ¥çœ‹ç‰ˆæœ¬</span>
apimeter<span class="w"> </span>-V

<span class="c1"># æŸ¥çœ‹å¸®åŠ©</span>
apimeter<span class="w"> </span>-h
</code></pre></div>

<h2 id="_5">ğŸš€ ç¬¬äºŒæ­¥ï¼šå‡†å¤‡æµ‹è¯•ç¯å¢ƒ<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h2>
<p>æˆ‘ä»¬å°†ä½¿ç”¨ ApiMeter è‡ªå¸¦çš„æµ‹è¯•æœåŠ¡å™¨è¿›è¡Œæ¼”ç¤ºã€‚</p>
<h3 id="_6">å¯åŠ¨æµ‹è¯•æœåŠ¡å™¨<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<p>é¦–å…ˆï¼Œä¸‹è½½æµ‹è¯•æœåŠ¡å™¨æ–‡ä»¶ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># æ–¹å¼1ï¼šå¦‚æœä½ å·²ç»å…‹éš†äº† ApiMeter ä»“åº“</span>
<span class="nb">cd</span><span class="w"> </span>/path/to/apimeter
python<span class="w"> </span>tests/api_server.py

<span class="c1"># æ–¹å¼2ï¼šç›´æ¥ä½¿ç”¨åœ¨çº¿æœåŠ¡ï¼ˆè·³è¿‡æœ¬åœ°æœåŠ¡å™¨ï¼‰</span>
<span class="c1"># æˆ‘ä»¬åé¢çš„ç¤ºä¾‹ä¹Ÿå¯ä»¥ä½¿ç”¨ https://httpbin.org</span>
</code></pre></div>

<p>æœåŠ¡å™¨å¯åŠ¨åï¼Œä½ ä¼šçœ‹åˆ°ï¼š</p>
<div class="codehilite"><pre><span></span><code>* Running on http://127.0.0.1:5000/
</code></pre></div>

<h3 id="_7">æµ‹è¯•æœåŠ¡å™¨æ¥å£è¯´æ˜<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<p>æˆ‘ä»¬çš„æµ‹è¯•æœåŠ¡å™¨æä¾›äº†ä¸€ä¸ªç®€å•çš„ç”¨æˆ·ç®¡ç† APIï¼š</p>
<table>
<thead>
<tr>
<th>æ¥å£</th>
<th>æ–¹æ³•</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/api/get-token</code></td>
<td>POST</td>
<td>è·å–è®¿é—®ä»¤ç‰Œ</td>
</tr>
<tr>
<td><code>/api/users/&lt;id&gt;</code></td>
<td>POST</td>
<td>åˆ›å»ºç”¨æˆ·</td>
</tr>
<tr>
<td><code>/api/users/&lt;id&gt;</code></td>
<td>GET</td>
<td>æŸ¥è¯¢ç”¨æˆ·</td>
</tr>
<tr>
<td><code>/api/users/&lt;id&gt;</code></td>
<td>PUT</td>
<td>æ›´æ–°ç”¨æˆ·</td>
</tr>
<tr>
<td><code>/api/users/&lt;id&gt;</code></td>
<td>DELETE</td>
<td>åˆ é™¤ç”¨æˆ·</td>
</tr>
</tbody>
</table>
<h2 id="_8">ğŸ“ ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h2>
<h3 id="1">1. åˆ›å»ºé¡¹ç›®ç»“æ„<a class="headerlink" href="#1" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># åˆ›å»ºé¡¹ç›®ç›®å½•</span>
mkdir<span class="w"> </span>my_api_test
<span class="nb">cd</span><span class="w"> </span>my_api_test

<span class="c1"># åˆ›å»ºå¿…è¦çš„ç›®å½•</span>
mkdir<span class="w"> </span>-p<span class="w"> </span>testcases
mkdir<span class="w"> </span>-p<span class="w"> </span>api
</code></pre></div>

<h3 id="2">2. åˆ›å»ºè‡ªå®šä¹‰å‡½æ•°æ–‡ä»¶<a class="headerlink" href="#2" title="Permanent link">&para;</a></h3>
<p>åˆ›å»º <code>debugtalk.py</code>ï¼ˆæ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•ï¼‰ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">hashlib</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">hmac</span>

<span class="n">SECRET_KEY</span> <span class="o">=</span> <span class="s2">&quot;DebugTalk&quot;</span>

<span class="k">def</span><span class="w"> </span><span class="nf">get_sign</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ç”Ÿæˆç­¾å&quot;&quot;&quot;</span>
    <span class="n">content</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;ascii&quot;</span><span class="p">)</span>
    <span class="n">sign_key</span> <span class="o">=</span> <span class="n">SECRET_KEY</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;ascii&quot;</span><span class="p">)</span>
    <span class="n">sign</span> <span class="o">=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">sign_key</span><span class="p">,</span> <span class="n">content</span><span class="p">,</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha1</span><span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">sign</span>

<span class="k">def</span><span class="w"> </span><span class="nf">validate_token_length</span><span class="p">(</span><span class="n">token</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;æ ¡éªŒ token é•¿åº¦&quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">token</span><span class="p">)</span> <span class="o">==</span> <span class="mi">16</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Token length should be 16, got </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">token</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">return</span> <span class="kc">True</span>

<span class="k">def</span><span class="w"> </span><span class="nf">validate_user_data</span><span class="p">(</span><span class="n">user_data</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;æ ¡éªŒç”¨æˆ·æ•°æ®å®Œæ•´æ€§&quot;&quot;&quot;</span>
    <span class="n">required_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;password&quot;</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">required_fields</span><span class="p">:</span>
        <span class="k">assert</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">user_data</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Missing required field: </span><span class="si">{</span><span class="n">field</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div>

<h3 id="3">3. åˆ›å»ºç¬¬ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹<a class="headerlink" href="#3" title="Permanent link">&para;</a></h3>
<p>åˆ›å»º <code>testcases/test_user_management.yml</code>ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="nt">config</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ç”¨æˆ·ç®¡ç†æ¥å£æµ‹è¯•&quot;</span>
<span class="w">  </span><span class="nt">variables</span><span class="p">:</span>
<span class="w">    </span><span class="nt">base_url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://127.0.0.1:5000&quot;</span>
<span class="w">    </span><span class="nt">user_agent</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;iOS/10.3&quot;</span>
<span class="w">    </span><span class="nt">device_sn</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;TEST_DEVICE_001&quot;</span>
<span class="w">    </span><span class="nt">os_platform</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ios&quot;</span>
<span class="w">    </span><span class="nt">app_version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2.8.6&quot;</span>

<span class="nt">teststeps</span><span class="p">:</span>
<span class="c1"># ==================== æ­¥éª¤1ï¼šè·å–è®¿é—®ä»¤ç‰Œ ====================</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">è·å–è®¿é—®ä»¤ç‰Œ</span>
<span class="w">  </span><span class="nt">request</span><span class="p">:</span>
<span class="w">    </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$base_url/api/get-token</span>
<span class="w">    </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">POST</span>
<span class="w">    </span><span class="nt">headers</span><span class="p">:</span>
<span class="w">      </span><span class="nt">Content-Type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/json&quot;</span>
<span class="w">      </span><span class="nt">user_agent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$user_agent</span>
<span class="w">      </span><span class="nt">device_sn</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$device_sn</span>
<span class="w">      </span><span class="nt">os_platform</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$os_platform</span>
<span class="w">      </span><span class="nt">app_version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$app_version</span>
<span class="w">    </span><span class="nt">json</span><span class="p">:</span>
<span class="w">      </span><span class="nt">sign</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${get_sign($device_sn, $os_platform, $app_version)}</span>

<span class="w">  </span><span class="nt">extract</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># æå– token ä¾›åç»­æ­¥éª¤ä½¿ç”¨</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">token</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">content.token</span>

<span class="w">  </span><span class="nt">validate</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># ä¼ ç»Ÿæ ¡éªŒæ–¹å¼</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">eq</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;status_code&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">200</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">eq</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;content.success&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">true</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">len_eq</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;content.token&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">16</span><span class="p p-Indicator">]</span>

<span class="w">  </span><span class="nt">script</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># ğŸ†• ApiMeter æ–°ç‰¹æ€§ï¼šscript è‡ªå®šä¹‰è„šæœ¬æ ¡éªŒ</span>
<span class="w">    </span><span class="c1"># æ”¯æŒä»»æ„ Python è„šæœ¬ï¼Œæ›´çµæ´»å¼ºå¤§</span>

<span class="w">    </span><span class="c1"># åŸºç¡€æ–­è¨€</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert status_code == 200</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert content.success is True</span>

<span class="w">    </span><span class="c1"># å…¨å±€å˜é‡ç›´æ¥è®¿é—®ï¼ˆæ— éœ€ $ å‰ç¼€ï¼‰</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert len(content.token) == 16</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert content.token is not None</span>

<span class="w">    </span><span class="c1"># è°ƒç”¨è‡ªå®šä¹‰å‡½æ•°</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${validate_token_length(content.token)}</span>

<span class="w">    </span><span class="c1"># å¤æ‚æ¡ä»¶åˆ¤æ–­</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">      </span><span class="no">if status_code == 200:</span>
<span class="w">          </span><span class="no">assert content.success is True</span>
<span class="w">          </span><span class="no">assert &quot;token&quot; in content</span>
<span class="w">      </span><span class="no">else:</span>
<span class="w">          </span><span class="no">assert content.success is False</span>

<span class="w">    </span><span class="c1"># æ€§èƒ½æ ¡éªŒ</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert elapsed.total_seconds &lt; 2.0</span>

<span class="c1"># ==================== æ­¥éª¤2ï¼šåˆ›å»ºç”¨æˆ· ====================</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">åˆ›å»ºæ–°ç”¨æˆ·</span>
<span class="w">  </span><span class="nt">request</span><span class="p">:</span>
<span class="w">    </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$base_url/api/users/1001</span>
<span class="w">    </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">POST</span>
<span class="w">    </span><span class="nt">headers</span><span class="p">:</span>
<span class="w">      </span><span class="nt">Content-Type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/json&quot;</span>
<span class="w">      </span><span class="nt">device_sn</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$device_sn</span>
<span class="w">      </span><span class="nt">token</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$token</span><span class="w">  </span><span class="c1"># ä½¿ç”¨ä¸Šä¸€æ­¥æå–çš„ token</span>
<span class="w">    </span><span class="nt">json</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;æµ‹è¯•ç”¨æˆ·&quot;</span>
<span class="w">      </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;123456&quot;</span>

<span class="w">  </span><span class="nt">script</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># çŠ¶æ€ç æ ¡éªŒ</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert status_code == 201</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert content.success is True</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert content.msg == &quot;user created successfully.&quot;</span>

<span class="w">    </span><span class="c1"># è‡ªå®šä¹‰é”™è¯¯ä¿¡æ¯</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert status_code == 201, f&quot;æœŸæœ›çŠ¶æ€ç  201ï¼Œå®é™…å¾—åˆ° {status_code}&quot;</span>

<span class="c1"># ==================== æ­¥éª¤3ï¼šæŸ¥è¯¢ç”¨æˆ· ====================</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</span>
<span class="w">  </span><span class="nt">request</span><span class="p">:</span>
<span class="w">    </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$base_url/api/users/1001</span>
<span class="w">    </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GET</span>
<span class="w">    </span><span class="nt">headers</span><span class="p">:</span>
<span class="w">      </span><span class="nt">Content-Type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/json&quot;</span>
<span class="w">      </span><span class="nt">device_sn</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$device_sn</span>
<span class="w">      </span><span class="nt">token</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$token</span>

<span class="w">  </span><span class="nt">extract</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">user_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">content.data.name</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">user_password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">content.data.password</span>

<span class="w">  </span><span class="nt">script</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># åŸºç¡€æ ¡éªŒ</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert status_code == 200</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert content.success is True</span>

<span class="w">    </span><span class="c1"># ğŸ†• é“¾å¼å–å€¼ï¼ˆæ·±å±‚æ•°æ®è®¿é—®ï¼‰</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert content.data.name == &quot;æµ‹è¯•ç”¨æˆ·&quot;</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert content.data.password == &quot;123456&quot;</span>

<span class="w">    </span><span class="c1"># ğŸ†• è°ƒç”¨è‡ªå®šä¹‰å‡½æ•°æ ¡éªŒæ•°æ®ç»“æ„</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${validate_user_data(content.data)}</span>

<span class="w">    </span><span class="c1"># æ•°æ®ç±»å‹æ ¡éªŒ</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert isinstance(content.data, dict)</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert len(content.data) &gt;= 2</span>

<span class="c1"># ==================== æ­¥éª¤4ï¼šæ›´æ–°ç”¨æˆ· ====================</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">æ›´æ–°ç”¨æˆ·ä¿¡æ¯</span>
<span class="w">  </span><span class="nt">request</span><span class="p">:</span>
<span class="w">    </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$base_url/api/users/1001</span>
<span class="w">    </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PUT</span>
<span class="w">    </span><span class="nt">headers</span><span class="p">:</span>
<span class="w">      </span><span class="nt">Content-Type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/json&quot;</span>
<span class="w">      </span><span class="nt">device_sn</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$device_sn</span>
<span class="w">      </span><span class="nt">token</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$token</span>
<span class="w">    </span><span class="nt">json</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;æ›´æ–°åçš„ç”¨æˆ·å&quot;</span>
<span class="w">      </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;new_password&quot;</span>

<span class="w">  </span><span class="nt">script</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert status_code == 200</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert content.success is True</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert content.data.name == &quot;æ›´æ–°åçš„ç”¨æˆ·å&quot;</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert content.data.password == &quot;new_password&quot;</span>

<span class="c1"># ==================== æ­¥éª¤5ï¼šåˆ é™¤ç”¨æˆ· ====================</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">åˆ é™¤ç”¨æˆ·</span>
<span class="w">  </span><span class="nt">request</span><span class="p">:</span>
<span class="w">    </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$base_url/api/users/1001</span>
<span class="w">    </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DELETE</span>
<span class="w">    </span><span class="nt">headers</span><span class="p">:</span>
<span class="w">      </span><span class="nt">Content-Type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/json&quot;</span>
<span class="w">      </span><span class="nt">device_sn</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$device_sn</span>
<span class="w">      </span><span class="nt">token</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$token</span>

<span class="w">  </span><span class="nt">script</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert status_code == 200</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert content.success is True</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert content.data.name == &quot;æ›´æ–°åçš„ç”¨æˆ·å&quot;</span>
</code></pre></div>

<h2 id="_9">ğŸ® ç¬¬å››æ­¥ï¼šè¿è¡Œæµ‹è¯•<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h2>
<h3 id="_10">åŸºç¡€è¿è¡Œ<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># è¿è¡Œå•ä¸ªæµ‹è¯•æ–‡ä»¶</span>
hrun<span class="w"> </span>testcases/test_user_management.yml

<span class="c1"># è¿è¡Œæ•´ä¸ªç›®å½•</span>
hrun<span class="w"> </span>testcases/

<span class="c1"># è¯¦ç»†æ¨¡å¼ï¼ˆæ˜¾ç¤ºæ›´å¤šæ—¥å¿—ï¼‰</span>
hrun<span class="w"> </span>testcases/test_user_management.yml<span class="w"> </span>--log-level<span class="w"> </span>debug
</code></pre></div>

<h3 id="html">ç”Ÿæˆ HTML æŠ¥å‘Š<a class="headerlink" href="#html" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># ç”Ÿæˆå®Œæ•´æŠ¥å‘Š</span>
hrun<span class="w"> </span>testcases/test_user_management.yml<span class="w"> </span>--html<span class="w"> </span>report.html

<span class="c1"># æŠ¥å‘Šä¸­è·³è¿‡æˆåŠŸç”¨ä¾‹ï¼ˆä»…æ˜¾ç¤ºå¤±è´¥å’Œé”™è¯¯ï¼‰</span>
hrun<span class="w"> </span>testcases/test_user_management.yml<span class="w"> </span>--html<span class="w"> </span>report.html<span class="w"> </span>--skip-success

<span class="c1"># åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€æŠ¥å‘Š</span>
open<span class="w"> </span>report.html<span class="w">  </span><span class="c1"># macOS</span>
<span class="c1"># æˆ–</span>
xdg-open<span class="w"> </span>report.html<span class="w">  </span><span class="c1"># Linux</span>
<span class="c1"># æˆ–ç›´æ¥ç”¨æµè§ˆå™¨æ‰“å¼€ report.html</span>
</code></pre></div>

<h3 id="_11">é¢„æœŸè¾“å‡º<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><code>test_user_management.yml
  è·å–è®¿é—®ä»¤ç‰Œ âœ“
  åˆ›å»ºæ–°ç”¨æˆ· âœ“
  æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ âœ“
  æ›´æ–°ç”¨æˆ·ä¿¡æ¯ âœ“
  åˆ é™¤ç”¨æˆ· âœ“

----------------------------------------------------------------------
Ran 5 tests in 0.123s

OK
</code></pre></div>

<h2 id="apimeter_1">ğŸ¯ ç¬¬äº”æ­¥ï¼šä½“éªŒ ApiMeter æ ¸å¿ƒç‰¹æ€§<a class="headerlink" href="#apimeter_1" title="Permanent link">&para;</a></h2>
<h3 id="1script">ç‰¹æ€§ 1ï¼šscript è‡ªå®šä¹‰è„šæœ¬æ ¡éªŒ<a class="headerlink" href="#1script" title="Permanent link">&para;</a></h3>
<p><strong>ä¼ ç»Ÿæ–¹å¼</strong> vs <strong>ApiMeter æ–¹å¼</strong>ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># âŒ ä¼ ç»Ÿæ–¹å¼ï¼švalidateï¼ˆåŠŸèƒ½æœ‰é™ï¼‰</span>
<span class="nt">validate</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">eq</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;status_code&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">200</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">eq</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;content.success&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">true</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">len_eq</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;content.token&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">16</span><span class="p p-Indicator">]</span>

<span class="c1"># âœ… ApiMeter æ–¹å¼ï¼šscriptï¼ˆåŠŸèƒ½å¼ºå¤§ï¼‰</span>
<span class="nt">script</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># ç›´æ¥ä½¿ç”¨ Python assert è¯­å¥</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert status_code == 200</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert content.success is True</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert len(content.token) == 16</span>

<span class="w">  </span><span class="c1"># æ”¯æŒå¤æ‚æ¡ä»¶</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert status_code in [200, 201, 202]</span>

<span class="w">  </span><span class="c1"># æ”¯æŒå¾ªç¯</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no">for item in content.items:</span>
<span class="w">        </span><span class="no">assert item.get(&quot;id&quot;) is not None</span>

<span class="w">  </span><span class="c1"># æ”¯æŒæ¡ä»¶åˆ¤æ–­</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">    </span><span class="no">if content.user.vip_level &gt; 0:</span>
<span class="w">        </span><span class="no">assert content.user.vip_expires is not None</span>
</code></pre></div>

<h3 id="2_1">ç‰¹æ€§ 2ï¼šå…¨å±€å˜é‡æ— ç¼è®¿é—®<a class="headerlink" href="#2_1" title="Permanent link">&para;</a></h3>
<p>åœ¨ <code>script</code> ä¸­ï¼Œå¯ä»¥ç›´æ¥è®¿é—®æ‰€æœ‰å“åº”å­—æ®µï¼Œæ— éœ€ç‰¹æ®Šè¯­æ³•ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="nt">script</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># ç›´æ¥è®¿é—®ï¼Œæ— éœ€ $ å‰ç¼€</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert status_code == 200</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert headers[&quot;Content-Type&quot;] == &quot;application/json&quot;</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert content.user.id &gt; 0</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert cookies.session_id is not None</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert elapsed.total_seconds &lt; 2.0</span>

<span class="w">  </span><span class="c1"># æ”¯æŒé“¾å¼å–å€¼ï¼ˆæ·±å±‚è®¿é—®ï¼‰</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert content.data.user.profile.age &gt; 0</span>
</code></pre></div>

<p><strong>å¯ç”¨çš„å…¨å±€å˜é‡ï¼š</strong>
- <code>status_code</code> - HTTP çŠ¶æ€ç 
- <code>headers</code> - å“åº”å¤´
- <code>cookies</code> - Cookie ä¿¡æ¯
- <code>content</code> / <code>body</code> / <code>json</code> - å“åº”ä½“
- <code>elapsed</code> - å“åº”æ—¶é—´
- <code>ok</code> - è¯·æ±‚æ˜¯å¦æˆåŠŸ
- <code>reason</code> - çŠ¶æ€è¯´æ˜
- <code>url</code> - è¯·æ±‚ URL</p>
<h3 id="3_1">ç‰¹æ€§ 3ï¼šè‡ªå®šä¹‰å‡½æ•°é«˜çº§å‚æ•°<a class="headerlink" href="#3_1" title="Permanent link">&para;</a></h3>
<p>ApiMeter æ”¯æŒå‘è‡ªå®šä¹‰å‡½æ•°ä¼ é€’å¤æ‚å‚æ•°ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># 1ï¸âƒ£ ç®€å•å‚æ•°</span>
<span class="nt">script</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${validate_token(content.token)}</span>

<span class="c1"># 2ï¸âƒ£ åˆ—è¡¨å‚æ•°</span>
<span class="nt">request</span><span class="p">:</span>
<span class="w">  </span><span class="nt">json</span><span class="p">:</span>
<span class="w">    </span><span class="nt">sign</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${get_sign_v2([$device_sn, $os_platform, $app_version])}</span>

<span class="c1"># 3ï¸âƒ£ å­—å…¸å‚æ•°</span>
<span class="nt">request</span><span class="p">:</span>
<span class="w">  </span><span class="nt">json</span><span class="p">:</span>
<span class="w">    </span><span class="nt">sign</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;${get_sign_v3({device_sn:</span><span class="nv"> </span><span class="s">$device_sn,</span><span class="nv"> </span><span class="s">platform:</span><span class="nv"> </span><span class="s">$os_platform})}&quot;</span>

<span class="c1"># 4ï¸âƒ£ å¤æ‚åµŒå¥—å¯¹è±¡</span>
<span class="nt">script</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;${check_nested_fields(content,</span><span class="nv"> </span><span class="s">{list_path:</span><span class="nv"> </span><span class="s">productList,</span><span class="nv"> </span><span class="s">check_fields:</span><span class="nv"> </span><span class="s">[id,</span><span class="nv"> </span><span class="s">name,</span><span class="nv"> </span><span class="s">price]})}&quot;</span>
</code></pre></div>

<p>å¯¹åº”çš„ <code>debugtalk.py</code> å‡½æ•°ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># 1ï¸âƒ£ ç®€å•å‚æ•°</span>
<span class="k">def</span><span class="w"> </span><span class="nf">validate_token</span><span class="p">(</span><span class="n">token</span><span class="p">):</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">token</span><span class="p">)</span> <span class="o">==</span> <span class="mi">16</span>
    <span class="k">return</span> <span class="kc">True</span>

<span class="c1"># 2ï¸âƒ£ åˆ—è¡¨å‚æ•°</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_sign_v2</span><span class="p">(</span><span class="n">args_list</span><span class="p">):</span>
    <span class="n">content</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args_list</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;ascii&quot;</span><span class="p">)</span>
    <span class="n">sign_key</span> <span class="o">=</span> <span class="n">SECRET_KEY</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;ascii&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">hmac</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">sign_key</span><span class="p">,</span> <span class="n">content</span><span class="p">,</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha1</span><span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>

<span class="c1"># 3ï¸âƒ£ å­—å…¸å‚æ•°</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_sign_v3</span><span class="p">(</span><span class="n">args_dict</span><span class="p">):</span>
    <span class="n">content</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">args_dict</span><span class="p">[</span><span class="s2">&quot;device_sn&quot;</span><span class="p">],</span> <span class="n">args_dict</span><span class="p">[</span><span class="s2">&quot;platform&quot;</span><span class="p">]])</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;ascii&quot;</span><span class="p">)</span>
    <span class="n">sign_key</span> <span class="o">=</span> <span class="n">SECRET_KEY</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;ascii&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">hmac</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">sign_key</span><span class="p">,</span> <span class="n">content</span><span class="p">,</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha1</span><span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>

<span class="c1"># 4ï¸âƒ£ å¤æ‚åµŒå¥—å¯¹è±¡</span>
<span class="k">def</span><span class="w"> </span><span class="nf">check_nested_fields</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
    <span class="n">list_path</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;list_path&quot;</span><span class="p">]</span>
    <span class="n">check_fields</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;check_fields&quot;</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="n">list_path</span><span class="p">]:</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">check_fields</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">item</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div>

<h3 id="4">ç‰¹æ€§ 4ï¼šå˜é‡è½¬ä¹‰<a class="headerlink" href="#4" title="Permanent link">&para;</a></h3>
<p>å½“æ•°æ®å­—æ®µåä¸å…¨å±€å˜é‡åŒåæ—¶ï¼Œä½¿ç”¨åæ–œæ è½¬ä¹‰ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="nt">script</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># content æ˜¯å…¨å±€å˜é‡ï¼ˆå“åº”å†…å®¹ï¼‰</span>
<span class="w">  </span><span class="c1"># \content æ˜¯å­—ç¬¦ä¸² &quot;content&quot;ï¼ˆå­—æ®µåï¼‰</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${check_field_exists(data, \content)}</span>
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">check_field_exists</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">field_name</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    æ£€æŸ¥æ•°æ®ä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šå­—æ®µ</span>
<span class="sd">    field_name æ¥æ”¶åˆ°çš„æ˜¯å­—ç¬¦ä¸² &quot;content&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">field_name</span> <span class="ow">in</span> <span class="n">data</span>
</code></pre></div>

<h2 id="_12">ğŸ“Š ç¬¬å…­æ­¥ï¼šæŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h2>
<p>è¿è¡Œæµ‹è¯•åç”Ÿæˆçš„ HTML æŠ¥å‘ŠåŒ…å«ï¼š</p>
<h3 id="1_1">1. æµ‹è¯•æ¦‚è§ˆ<a class="headerlink" href="#1_1" title="Permanent link">&para;</a></h3>
<ul>
<li>âœ… æ€»ç”¨ä¾‹æ•°ã€æˆåŠŸæ•°ã€å¤±è´¥æ•°</li>
<li>âœ… æ‰§è¡Œæ—¶é—´ç»Ÿè®¡</li>
<li>âœ… æˆåŠŸç‡ç™¾åˆ†æ¯”</li>
</ul>
<h3 id="2-apimeter">2. è¯¦ç»†ç»“æœï¼ˆğŸ†• ApiMeter å¢å¼ºç‰¹æ€§ï¼‰<a class="headerlink" href="#2-apimeter" title="Permanent link">&para;</a></h3>
<p><strong>æ™ºèƒ½æŠ˜å </strong>ï¼š
- è¶…è¿‡ 15 è¡Œçš„å†…å®¹è‡ªåŠ¨æŠ˜å 
- ç‚¹å‡»å±•å¼€/æŠ˜å 
- ä¸€é”®å¤åˆ¶æŒ‰é’®</p>
<p><strong>JSON æ ‘å½¢å±•ç¤º</strong>ï¼š
- è‡ªåŠ¨è¯†åˆ« JSON å’Œ Python å­—å…¸
- å½©è‰²è¯­æ³•é«˜äº®
- èŠ‚ç‚¹çº§åˆ«å±•å¼€/æŠ˜å 
- æå‡å¤§æ•°æ®é‡åœºæ™¯çš„å¯è¯»æ€§</p>
<p><strong>Script æ ¡éªŒå±•ç¤º</strong>ï¼š
- æ¯æ¡è„šæœ¬çš„æ‰§è¡Œç»“æœ
- å¤±è´¥è„šæœ¬çš„è¯¦ç»†é”™è¯¯ä¿¡æ¯
- æ‰§è¡Œè¾“å‡ºå’Œè¿”å›å€¼</p>
<h2 id="_13">ğŸ“ è¿›é˜¶å­¦ä¹ <a class="headerlink" href="#_13" title="Permanent link">&para;</a></h2>
<h3 id="_14">å‚æ•°åŒ–æµ‹è¯•<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h3>
<p>åˆ›å»ºæ•°æ®æ–‡ä»¶ <code>data/users.csv</code>ï¼š</p>
<div class="codehilite"><pre><span></span><code>user_id,user_name,password
1001,Alice,pass123
1002,Bob,pass456
1003,Charlie,pass789
</code></pre></div>

<p>åœ¨æµ‹è¯•ç”¨ä¾‹ä¸­ä½¿ç”¨ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="nt">config</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;å‚æ•°åŒ–ç”¨æˆ·åˆ›å»ºæµ‹è¯•&quot;</span>
<span class="w">  </span><span class="nt">parameters</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">user_id-user_name-password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${P(data/users.csv)}</span>

<span class="nt">teststeps</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;åˆ›å»ºç”¨æˆ·</span><span class="nv"> </span><span class="s">-</span><span class="nv"> </span><span class="s">${user_name}&quot;</span>
<span class="w">  </span><span class="nt">request</span><span class="p">:</span>
<span class="w">    </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$base_url/api/users/$user_id</span>
<span class="w">    </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">POST</span>
<span class="w">    </span><span class="nt">json</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$user_name</span>
<span class="w">      </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$password</span>
<span class="w">  </span><span class="nt">script</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert status_code == 201</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert content.success is True</span>
</code></pre></div>

<h3 id="_15">æµ‹è¯•ç”¨ä¾‹åˆ†å±‚<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h3>
<p>å°†æ¥å£å®šä¹‰å’Œæµ‹è¯•é€»è¾‘åˆ†ç¦»ï¼š</p>
<p><strong>api/create_user.yml</strong>ï¼ˆæ¥å£å®šä¹‰ï¼‰ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">åˆ›å»ºç”¨æˆ·æ¥å£</span>
<span class="nt">variables</span><span class="p">:</span>
<span class="w">  </span><span class="nt">user_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">9999</span>
<span class="w">  </span><span class="nt">user_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;default&quot;</span>
<span class="w">  </span><span class="nt">user_password</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;000000&quot;</span>
<span class="nt">request</span><span class="p">:</span>
<span class="w">  </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$base_url/api/users/$user_id</span>
<span class="w">  </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">POST</span>
<span class="w">  </span><span class="nt">headers</span><span class="p">:</span>
<span class="w">    </span><span class="nt">Content-Type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;application/json&quot;</span>
<span class="w">    </span><span class="nt">device_sn</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$device_sn</span>
<span class="w">    </span><span class="nt">token</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$token</span>
<span class="w">  </span><span class="nt">json</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$user_name</span>
<span class="w">    </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$user_password</span>
<span class="nt">validate</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">eq</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;status_code&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">201</span><span class="p p-Indicator">]</span>
</code></pre></div>

<p><strong>testcases/test_create_user.yml</strong>ï¼ˆæµ‹è¯•ç”¨ä¾‹ï¼‰ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="nt">config</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;åˆ›å»ºç”¨æˆ·æµ‹è¯•åœºæ™¯&quot;</span>
<span class="w">  </span><span class="nt">variables</span><span class="p">:</span>
<span class="w">    </span><span class="nt">base_url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://127.0.0.1:5000&quot;</span>

<span class="nt">teststeps</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">è·å– token</span>
<span class="w">  </span><span class="nt">testcase</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">testcases/setup.yml</span>
<span class="w">  </span><span class="nt">extract</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">token</span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">åˆ›å»ºç”¨æˆ· Alice</span>
<span class="w">  </span><span class="nt">api</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api/create_user.yml</span>
<span class="w">  </span><span class="nt">variables</span><span class="p">:</span>
<span class="w">    </span><span class="nt">user_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2001</span>
<span class="w">    </span><span class="nt">user_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Alice&quot;</span>
<span class="w">    </span><span class="nt">user_password</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;alice123&quot;</span>
<span class="w">  </span><span class="nt">script</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert content.success is True</span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">åˆ›å»ºç”¨æˆ· Bob</span>
<span class="w">  </span><span class="nt">api</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">api/create_user.yml</span>
<span class="w">  </span><span class="nt">variables</span><span class="p">:</span>
<span class="w">    </span><span class="nt">user_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2002</span>
<span class="w">    </span><span class="nt">user_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Bob&quot;</span>
<span class="w">    </span><span class="nt">user_password</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;bob456&quot;</span>
<span class="w">  </span><span class="nt">script</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert content.success is True</span>
</code></pre></div>

<h3 id="_16">ç¯å¢ƒå˜é‡ç®¡ç†<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h3>
<p>åˆ›å»º <code>.env</code> æ–‡ä»¶ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># å¼€å‘ç¯å¢ƒ</span>
<span class="nv">BASE_URL</span><span class="o">=</span>http://127.0.0.1:5000
<span class="nv">DEVICE_SN</span><span class="o">=</span>DEV_DEVICE_001

<span class="c1"># æµ‹è¯•ç¯å¢ƒ</span>
<span class="c1"># BASE_URL=https://test.example.com</span>
<span class="c1"># DEVICE_SN=TEST_DEVICE_001</span>

<span class="c1"># ç”Ÿäº§ç¯å¢ƒ</span>
<span class="c1"># BASE_URL=https://api.example.com</span>
<span class="c1"># DEVICE_SN=PROD_DEVICE_001</span>
</code></pre></div>

<p>åœ¨æµ‹è¯•ç”¨ä¾‹ä¸­ä½¿ç”¨ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="nt">config</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ç¯å¢ƒé…ç½®ç¤ºä¾‹&quot;</span>
<span class="w">  </span><span class="nt">variables</span><span class="p">:</span>
<span class="w">    </span><span class="nt">base_url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${ENV(BASE_URL)}</span>
<span class="w">    </span><span class="nt">device_sn</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${ENV(DEVICE_SN)}</span>
</code></pre></div>

<h2 id="_17">ğŸ”¥ å®æˆ˜ç»ƒä¹ <a class="headerlink" href="#_17" title="Permanent link">&para;</a></h2>
<h3 id="1http">ç»ƒä¹  1ï¼šHTTP æ¥å£æµ‹è¯•<a class="headerlink" href="#1http" title="Permanent link">&para;</a></h3>
<p>ä½¿ç”¨å…¬å…±æµ‹è¯•æ¥å£ https://httpbin.org ç»ƒä¹ ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="nt">config</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;HTTPBin</span><span class="nv"> </span><span class="s">æµ‹è¯•ç»ƒä¹ &quot;</span>
<span class="w">  </span><span class="nt">base_url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://httpbin.org&quot;</span>

<span class="nt">teststeps</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GET è¯·æ±‚æµ‹è¯•</span>
<span class="w">  </span><span class="nt">request</span><span class="p">:</span>
<span class="w">    </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/get</span>
<span class="w">    </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GET</span>
<span class="w">    </span><span class="nt">params</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ApiMeter&quot;</span>
<span class="w">      </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2.12&quot;</span>
<span class="w">  </span><span class="nt">script</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert status_code == 200</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert json.args.name == &quot;ApiMeter&quot;</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert json.args.version == &quot;2.12&quot;</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert json.url.startswith(&quot;https://httpbin.org&quot;)</span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">POST è¯·æ±‚æµ‹è¯•</span>
<span class="w">  </span><span class="nt">request</span><span class="p">:</span>
<span class="w">    </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/post</span>
<span class="w">    </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">POST</span>
<span class="w">    </span><span class="nt">json</span><span class="p">:</span>
<span class="w">      </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;test_user&quot;</span>
<span class="w">      </span><span class="nt">email</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;test@example.com&quot;</span>
<span class="w">  </span><span class="nt">script</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert status_code == 200</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert json.json.username == &quot;test_user&quot;</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert json.json.email == &quot;test@example.com&quot;</span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">å“åº”å¤´æµ‹è¯•</span>
<span class="w">  </span><span class="nt">request</span><span class="p">:</span>
<span class="w">    </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/headers</span>
<span class="w">    </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GET</span>
<span class="w">  </span><span class="nt">script</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert status_code == 200</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert &quot;User-Agent&quot; in json.headers</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert json.headers[&quot;Host&quot;] == &quot;httpbin.org&quot;</span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">å“åº”çŠ¶æ€ç æµ‹è¯•</span>
<span class="w">  </span><span class="nt">request</span><span class="p">:</span>
<span class="w">    </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/status/404</span>
<span class="w">    </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GET</span>
<span class="w">  </span><span class="nt">script</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert status_code == 404</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert ok is False</span>
</code></pre></div>

<h3 id="2_2">ç»ƒä¹  2ï¼šè®¤è¯æµç¨‹æµ‹è¯•<a class="headerlink" href="#2_2" title="Permanent link">&para;</a></h3>
<p>æ¨¡æ‹Ÿå®Œæ•´çš„ OAuth2 è®¤è¯æµç¨‹ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="nt">config</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;OAuth2</span><span class="nv"> </span><span class="s">è®¤è¯æµç¨‹&quot;</span>
<span class="w">  </span><span class="nt">variables</span><span class="p">:</span>
<span class="w">    </span><span class="nt">client_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;test_client&quot;</span>
<span class="w">    </span><span class="nt">client_secret</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;test_secret&quot;</span>

<span class="nt">teststeps</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">è·å–æˆæƒç </span>
<span class="w">  </span><span class="nt">request</span><span class="p">:</span>
<span class="w">    </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://oauth.example.com/authorize</span>
<span class="w">    </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">POST</span>
<span class="w">    </span><span class="nt">json</span><span class="p">:</span>
<span class="w">      </span><span class="nt">client_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$client_id</span>
<span class="w">      </span><span class="nt">response_type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;code&quot;</span>
<span class="w">  </span><span class="nt">extract</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">auth_code</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">content.code</span>
<span class="w">  </span><span class="nt">script</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert status_code == 200</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert content.code is not None</span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">è·å–è®¿é—®ä»¤ç‰Œ</span>
<span class="w">  </span><span class="nt">request</span><span class="p">:</span>
<span class="w">    </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://oauth.example.com/token</span>
<span class="w">    </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">POST</span>
<span class="w">    </span><span class="nt">json</span><span class="p">:</span>
<span class="w">      </span><span class="nt">client_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$client_id</span>
<span class="w">      </span><span class="nt">client_secret</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$client_secret</span>
<span class="w">      </span><span class="nt">code</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$auth_code</span>
<span class="w">      </span><span class="nt">grant_type</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;authorization_code&quot;</span>
<span class="w">  </span><span class="nt">extract</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">access_token</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">content.access_token</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">refresh_token</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">content.refresh_token</span>
<span class="w">  </span><span class="nt">script</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert status_code == 200</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert content.access_token is not None</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert content.token_type == &quot;Bearer&quot;</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert content.expires_in &gt; 0</span>

<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ä½¿ç”¨è®¿é—®ä»¤ç‰Œè¯·æ±‚ API</span>
<span class="w">  </span><span class="nt">request</span><span class="p">:</span>
<span class="w">    </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://api.example.com/user/profile</span>
<span class="w">    </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GET</span>
<span class="w">    </span><span class="nt">headers</span><span class="p">:</span>
<span class="w">      </span><span class="nt">Authorization</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Bearer</span><span class="nv"> </span><span class="s">$access_token&quot;</span>
<span class="w">  </span><span class="nt">script</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert status_code == 200</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert content.user_id is not None</span>
</code></pre></div>

<h2 id="_18">ğŸ“š ä¸‹ä¸€æ­¥å­¦ä¹ <a class="headerlink" href="#_18" title="Permanent link">&para;</a></h2>
<p>æ­å–œä½ ï¼ä½ å·²ç»æŒæ¡äº† ApiMeter çš„æ ¸å¿ƒåŠŸèƒ½ã€‚æ¥ä¸‹æ¥å¯ä»¥ï¼š</p>
<h3 id="_19">æ·±å…¥å­¦ä¹ <a class="headerlink" href="#_19" title="Permanent link">&para;</a></h3>
<ul>
<li>ğŸ“– <a href="../prepare/script/">è‡ªå®šä¹‰è„šæœ¬æ ¡éªŒè¯¦è§£</a> - æŒæ¡ script çš„æ‰€æœ‰ç”¨æ³•</li>
<li>ğŸ“– <a href="../features/advanced-functions/">è‡ªå®šä¹‰å‡½æ•°é«˜çº§ç”¨æ³•</a> - å­¦ä¹ å¤æ‚å‚æ•°ä¼ é€’</li>
<li>ğŸ“– <a href="../features/global-variables/">å…¨å±€å˜é‡å®Œæ•´æŒ‡å—</a> - äº†è§£æ‰€æœ‰å¯ç”¨å˜é‡</li>
<li>ğŸ“– <a href="../features/report-enhancements/">æµ‹è¯•æŠ¥å‘Šå¢å¼º</a> - äº†è§£æŠ¥å‘Šä¼˜åŒ–ç‰¹æ€§</li>
</ul>
<h3 id="_20">å®æˆ˜æ¡ˆä¾‹<a class="headerlink" href="#_20" title="Permanent link">&para;</a></h3>
<ul>
<li>ğŸ¯ <a href="../examples/advanced-examples/">é«˜çº§ç”¨æ³•ç¤ºä¾‹</a> - çœŸå®åœºæ™¯æ¡ˆä¾‹</li>
<li>ğŸ¯ <a href="../examples/demo-klook/">å®Œæ•´é¡¹ç›®ç¤ºä¾‹</a> - ä¼ä¸šçº§é¡¹ç›®ç»“æ„</li>
</ul>
<h3 id="_21">è¿›é˜¶ä¸»é¢˜<a class="headerlink" href="#_21" title="Permanent link">&para;</a></h3>
<ul>
<li>ğŸš€ <a href="../run-tests/load-test/">æ€§èƒ½æµ‹è¯•</a> - ä½¿ç”¨ Locust è¿›è¡Œå‹æµ‹</li>
<li>ğŸš€ <a href="../run-tests/cli/">æŒç»­é›†æˆ</a> - é›†æˆåˆ° CI/CD æµç¨‹</li>
<li>ğŸš€ <a href="../prepare/testcase-layer/">ç”¨ä¾‹åˆ†å±‚</a> - ä¼˜åŒ–ç”¨ä¾‹ç»„ç»‡ç»“æ„</li>
</ul>
<h2 id="_22">â“ å¸¸è§é—®é¢˜<a class="headerlink" href="#_22" title="Permanent link">&para;</a></h2>
<h3 id="1-script-validate">1. ä¸ºä»€ä¹ˆæ¨èä½¿ç”¨ script è€Œä¸æ˜¯ validateï¼Ÿ<a class="headerlink" href="#1-script-validate" title="Permanent link">&para;</a></h3>
<p><strong>å›ç­”</strong>ï¼š</p>
<ul>
<li>âœ… <strong>script ä¼˜åŠ¿</strong>ï¼š</li>
<li>ä½¿ç”¨æ ‡å‡† Python è¯­æ³•ï¼Œé›¶å­¦ä¹ æˆæœ¬</li>
<li>æ”¯æŒä»»æ„å¤æ‚é€»è¾‘ï¼ˆæ¡ä»¶ã€å¾ªç¯ã€å‡½æ•°ï¼‰</li>
<li>é€æ¡æ‰§è¡Œï¼Œå•æ¡å¤±è´¥ä¸å½±å“å…¶ä»–æ ¡éªŒ</li>
<li>
<p>é”™è¯¯ä¿¡æ¯æ›´æ¸…æ™°</p>
</li>
<li>
<p>âš ï¸ <strong>validate å±€é™</strong>ï¼š</p>
</li>
<li>éœ€è¦è®°å¿†ç‰¹å®šè¯­æ³•</li>
<li>å¤æ‚é€»è¾‘éš¾ä»¥å®ç°</li>
<li>åŠŸèƒ½ç›¸å¯¹å›ºå®š</li>
</ul>
<p><strong>å»ºè®®</strong>ï¼šæ–°é¡¹ç›®ä¼˜å…ˆä½¿ç”¨ <code>script</code>ï¼Œä¸¤è€…å¯ä»¥å…±å­˜ã€‚</p>
<h3 id="2-script">2. script ä¸­çš„å˜é‡éœ€è¦åŠ  $ å‰ç¼€å—ï¼Ÿ<a class="headerlink" href="#2-script" title="Permanent link">&para;</a></h3>
<p><strong>å›ç­”</strong>ï¼š</p>
<div class="codehilite"><pre><span></span><code><span class="nt">script</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># âŒ é”™è¯¯ï¼šä¸éœ€è¦ $ å‰ç¼€</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert $status_code == 200</span>

<span class="w">  </span><span class="c1"># âœ… æ­£ç¡®ï¼šå…¨å±€å˜é‡ç›´æ¥ä½¿ç”¨</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert status_code == 200</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert content.token is not None</span>

<span class="w">  </span><span class="c1"># âœ… æ­£ç¡®ï¼šè‡ªå®šä¹‰å˜é‡éœ€è¦å¼•å·å’Œ $</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert &quot;$token&quot; is not None</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">assert len(&quot;$token&quot;) == 16</span>

<span class="w">  </span><span class="c1"># âœ… æ­£ç¡®ï¼šåœ¨å‡½æ•°ä¸­å¼•ç”¨è‡ªå®šä¹‰å˜é‡</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${validate_token($token)}</span>
</code></pre></div>

<h3 id="3_2">3. å¦‚ä½•è°ƒè¯•å¤±è´¥çš„æµ‹è¯•ï¼Ÿ<a class="headerlink" href="#3_2" title="Permanent link">&para;</a></h3>
<p><strong>æ–¹æ³• 1</strong>ï¼šæŸ¥çœ‹è¯¦ç»†æ—¥å¿—</p>
<div class="codehilite"><pre><span></span><code>hrun<span class="w"> </span>testcases/test.yml<span class="w"> </span>--log-level<span class="w"> </span>debug
</code></pre></div>

<p><strong>æ–¹æ³• 2</strong>ï¼šåœ¨ debugtalk.py ä¸­æ·»åŠ æ—¥å¿—</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">apimeter.logger</span><span class="w"> </span><span class="kn">import</span> <span class="n">log_debug</span><span class="p">,</span> <span class="n">log_info</span>

<span class="k">def</span><span class="w"> </span><span class="nf">my_function</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="n">log_debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;æ¥æ”¶åˆ°çš„æ•°æ®: </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="c1"># ä½ çš„é€»è¾‘</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">process</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="n">log_info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;å¤„ç†ç»“æœ: </span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div>

<p><strong>æ–¹æ³• 3</strong>ï¼šæŸ¥çœ‹ HTML æŠ¥å‘Š</p>
<p>æŠ¥å‘Šä¸­åŒ…å«æ¯ä¸ªæ­¥éª¤çš„å®Œæ•´è¯·æ±‚å’Œå“åº”ä¿¡æ¯ï¼Œä»¥åŠ script æ‰§è¡Œè¯¦æƒ…ã€‚</p>
<h3 id="4_1">4. å¦‚ä½•ç»„ç»‡å¤§å‹æµ‹è¯•é¡¹ç›®ï¼Ÿ<a class="headerlink" href="#4_1" title="Permanent link">&para;</a></h3>
<p><strong>æ¨èç»“æ„</strong>ï¼š</p>
<div class="codehilite"><pre><span></span><code>my_project/
â”œâ”€â”€ api/                    # æ¥å£å®šä¹‰å±‚
â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ login.yml
â”‚   â”‚   â””â”€â”€ logout.yml
â”‚   â””â”€â”€ user/
â”‚       â”œâ”€â”€ create.yml
â”‚       â”œâ”€â”€ update.yml
â”‚       â””â”€â”€ delete.yml
â”œâ”€â”€ testcases/             # æµ‹è¯•ç”¨ä¾‹å±‚
â”‚   â”œâ”€â”€ test_auth.yml
â”‚   â””â”€â”€ test_user_crud.yml
â”œâ”€â”€ testsuites/            # æµ‹è¯•å¥—ä»¶å±‚
â”‚   â””â”€â”€ full_regression.yml
â”œâ”€â”€ data/                  # æµ‹è¯•æ•°æ®
â”‚   â”œâ”€â”€ users.csv
â”‚   â””â”€â”€ products.csv
â”œâ”€â”€ debugtalk.py           # è‡ªå®šä¹‰å‡½æ•°
â”œâ”€â”€ .env                   # ç¯å¢ƒé…ç½®
â””â”€â”€ reports/               # æµ‹è¯•æŠ¥å‘Š
</code></pre></div>

<h2 id="_23">ğŸ‰ æ€»ç»“<a class="headerlink" href="#_23" title="Permanent link">&para;</a></h2>
<p>ä½ å·²ç»å­¦ä¼šäº†ï¼š</p>
<ul>
<li>âœ… å®‰è£…å’Œè¿è¡Œ ApiMeter</li>
<li>âœ… ç¼–å†™åŸºæœ¬æµ‹è¯•ç”¨ä¾‹ï¼ˆrequest + validate + scriptï¼‰</li>
<li>âœ… ä½¿ç”¨ script è¿›è¡Œå¼ºå¤§çš„è‡ªå®šä¹‰æ ¡éªŒ</li>
<li>âœ… ä½¿ç”¨å…¨å±€å˜é‡å’Œé“¾å¼å–å€¼</li>
<li>âœ… ç¼–å†™å’Œè°ƒç”¨è‡ªå®šä¹‰å‡½æ•°</li>
<li>âœ… ç”Ÿæˆå’ŒæŸ¥çœ‹ HTML æŠ¥å‘Š</li>
<li>âœ… å‚æ•°åŒ–æµ‹è¯•å’Œç”¨ä¾‹åˆ†å±‚</li>
</ul>
<p><strong>ApiMeter çš„æ ¸å¿ƒä¼˜åŠ¿</strong>ï¼š</p>
<table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>ä¼ ç»Ÿå·¥å…·</th>
<th>ApiMeter</th>
</tr>
</thead>
<tbody>
<tr>
<td>æ ¡éªŒèƒ½åŠ›</td>
<td>å›ºå®šè¯­æ³•</td>
<td>Python è„šæœ¬ï¼Œæ— é™å¯èƒ½</td>
</tr>
<tr>
<td>å­¦ä¹ æˆæœ¬</td>
<td>éœ€è®°å¿†ç‰¹å®šè¯­æ³•</td>
<td>æ ‡å‡† Pythonï¼Œé›¶å­¦ä¹ æˆæœ¬</td>
</tr>
<tr>
<td>å¤æ‚é€»è¾‘</td>
<td>æœ‰é™æ”¯æŒ</td>
<td>å®Œå…¨æ”¯æŒï¼ˆæ¡ä»¶ã€å¾ªç¯ã€å‡½æ•°ï¼‰</td>
</tr>
<tr>
<td>é”™è¯¯å¤„ç†</td>
<td>å•ç‚¹å¤±è´¥</td>
<td>é€æ¡æ‰§è¡Œï¼Œå®¹é”™å¤„ç†</td>
</tr>
<tr>
<td>æµ‹è¯•æŠ¥å‘Š</td>
<td>åŸºç¡€å±•ç¤º</td>
<td>æ™ºèƒ½æŠ˜å ã€æ ‘å½¢å±•ç¤º</td>
</tr>
</tbody>
</table>
<p>ç°åœ¨ï¼Œå¼€å§‹ä½ çš„ API è‡ªåŠ¨åŒ–æµ‹è¯•ä¹‹æ—…å§ï¼ğŸš€</p>
<hr />
<p><strong>éœ€è¦å¸®åŠ©ï¼Ÿ</strong>
- ğŸ“– <a href="https://zhuifengshen.github.io/APIMeter/">å®Œæ•´æ–‡æ¡£</a>
- ğŸ› <a href="https://git.umlife.net/utils/apimeter/issues">é—®é¢˜åé¦ˆ</a>
- ğŸ’¬ <a href="../sponsors/">æŠ€æœ¯äº¤æµç¾¤</a></p>
                
                  
                
              

<!-- AIåŠ©æ‰‹æµ®çª—è„šæœ¬ -->
<script
async
defer
src="https://view.umlife.net/chat/api/embed?protocol=https&host=view.umlife.net&token=1d8f7ca0d76e223f">
</script>


              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2017 - 2025 debugtalk
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    <link rel="stylesheet" href="../assets/fonts/font-awesome.css">
    
      <a href="https://git.umlife.net/utils/apimeter" class="md-footer-social__link fa fa-globe"></a>
    
      <a href="https://git.umlife.net/utils/apimeter" class="md-footer-social__link fa fa-github"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.a353778b.js"></script>
      
        
        
          
          <script src="../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
                <script src="../assets/javascripts/lunr/tinyseg.js"></script>
              
              
                <script src="../assets/javascripts/lunr/lunr.jp.js"></script>
              
            
          
          
        
      
      <script>app.initialize({version:"1.6.1",url:{base:".."}})</script>
      
        <script src="../js/slardar.js"></script>
      
    
  </body>
</html>